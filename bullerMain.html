<!DOCTYPE html>
<html>
  <head>
    <title>Example Page</title>
     <style>
       html, body {
        height: 100%;
      }
      #posContextDiv, #accountContext, #discountContext {
        display: none;
      }
    </style>
    <script src="https://cdn.tryretool.com/embed.js"></script>
    <script>
      function printContext() {
        var outputDiv = document.getElementById("posContextDiv");
        if (typeof posContext === "undefined") {
          outputDiv.innerHTML = "Loading POS Context...";
          setTimeout(printContext, 1000);
        } else {
          outputDiv.innerHTML = "<pre>" + JSON.stringify(posContext, null, 2) + "</pre>";
          
          // Add the retool dashboard embed. This must occur to read data into the app.
          var rt = window.retool.RetoolDashboard(document.getElementById('container'),"https://lsapacproserv.retool.com/embedded/public/3f370ce4-3674-45a0-9bef-3c74e3e3a023",
          {
            height: "100%",
            width: "100%",
           }
          );
          
// Fetch current account with a 1 second delay
setTimeout(function() {
  pos_getCurrentAccount(function(response) {
    document.getElementById("accountContext").innerHTML = "<pre class='text-white'>" + JSON.stringify(response.data, undefined, 2) + "</pre>";
    // Call the getAvailableDiscounts() function with a 1-second delay
    setTimeout(getAvailableDiscounts, 1000);
  });
}, 1000);

//Get Available Discounts
function getAvailableDiscounts() {
  const printResult = function (response) {
    document.getElementById("discountsContext").innerHTML = "<pre class='text-white'>"+JSON.stringify(response.data, undefined, 2)+"</pre>"
  };
  pos_getAvailableDiscounts(printResult)
}

document.addEventListener('DOMContentLoaded', printContext);

    </script>
  </head>
  <body>
    <div id="posContextDiv"></div>
    <div id="accountContext"></div>
    <div id="container" style="height: 100%; width: 100%;"></div>
    <div id="discountContext"></div>
  </body>
</html>
